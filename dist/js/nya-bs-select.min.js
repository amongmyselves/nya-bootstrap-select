/**
 * nya-bootstrap-select v2.0.20
 * Copyright 2014 Nyasoft
 * Licensed under MIT license
 */
!function(){"use strict";function a(){return++j}function b(a){return a&&a.window===a}function c(a){return"string"==typeof a}function d(a){if(null==a||b(a))return!1;var d=a.length;return 1===a.nodeType&&d?!0:c(a)||Array.isArray(a)||0===d||"number"==typeof d&&d>0&&d-1 in a}function e(){return Object.create(null)}function f(b,c){var d,e=typeof b;return"function"==e||"object"==e&&null!==b?"function"==typeof(d=b.$$hashKey)?d=b.$$hashKey():void 0===d&&(d=b.$$hashKey=(c||a)()):d=b,e+":"+d}function g(a,b,c){var d,e,f=[],g=[];for(d=0;d<b.length;d++)for(e=0;e<a.length;e++)a[e][c]?a[e][c]===b[d]&&g.push(a[e]):f.push(a[e]);return g=g.concat(f)}function h(a){var b=a[0],c=a[a.length-1],d=[b];do{if(b=b.nextSibling,!b)break;d.push(b)}while(b!==c);return angular.element(d)}function i(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}var j=0,k=function(a){return a.clone[0]},l=function(a){return a.clone[a.clone.length-1]},m=function(a,b,c,d,e,f,g,h){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b)),h&&(a.$group=h)},n=function(a,b){a.data("isolateScope",b)},o=function(a,b){var c,d=a.length;if(0===d)return!1;for(c=0;d>c;c++)if(w(b,a[c]))return!0;return!1},p=function(a,b){var c,d=a.length;if(0===d)return-1;for(c=0;d>c;c++)if(w(b,a[c]))return c;return-1},q=function(a,b,c){var d,e=a,f=typeof c;if(a==b)return null;do if("string"===f){if(d=" "+e.className+" ",1===e.nodeType&&d.replace(/[\t\r\n\f]/g," ").indexOf(c)>=0)return e}else if(e==c)return e;while((e=e.parentNode)&&e!=b&&9!==e.nodeType);return null},r=function(a){var b,c=a.className.replace(/[\t\r\n\f]/g," ").trim();b=c.split(" ");for(var d=0;d<b.length;d++)/\s+/.test(b[d])&&(b.splice(d,1),d--);return b},s=function(a,b){var c=r(a);return-1!==c.indexOf(b)},t=function(a,b){var c,d,e,f=a.children(),g=f.length;if(g>0)for(var h=0;g>h;h++){if(c=f.eq(h),d=!0,e=r(c[0]),e.length>0)for(var i=0;i<b.length;i++)if(-1===e.indexOf(b[i])){d=!1;break}if(d)return c}return[]},u=function(a,b){var c,d,e;if(-1!==a.text().toLowerCase().indexOf(b.toLowerCase()))return!0;for(c=a.children(),e=c.length,d=0;e>d;d++)if(-1!==c.eq(d).text().toLowerCase().indexOf(b.toLowerCase()))return!0;return!1},v=angular.element,w=angular.equals,x=angular.copy,y=angular.extend,z=angular.module("nya.bootstrap.select",[]);z.provider("nyaBsConfig",function(){var a=null,b={"en-us":{defaultNoneSelection:"Nothing selected",noSearchResult:"NO SEARCH RESULT",numberItemSelected:"%d item selected"}},c=x(b);this.setLocalizedText=function(a,b){if(!a)throw new Error("localeId must be a string formatted as languageId-countryId");c[a]||(c[a]={}),c[a]=y(c[a],b)},this.useLocale=function(b){a=b},this.$get=["$locale",function(d){var e;return e=a?c[a]:c[d.id],e||(e=b["en-us"]),e}]}),z.controller("nyaBsSelectCtrl",function(){var a=this;a.keyIdentifier=null,a.valueIdentifier=null,a.isMultiple=!1,a.onCollectionChange=function(){},a.setId=function(b){a.id=b||"id#"+Math.floor(1e4*Math.random())}}),z.directive("nyaBsSelect",["$parse","$document","$timeout","nyaBsConfig",function(a,b,c,d){var e="Nothing selected",f='<button class="btn btn-default dropdown-toggle" type="button"><span class="pull-left filter-option"></span>&nbsp;<span class="caret"></span></button>',g='<div class="dropdown-menu open"></div>',h='<div class="bs-searchbox"><input type="text" class="form-control"></div>',j='<ul class="dropdown-menu inner"></ul>',k='<li class="no-search-result"><span>NO SEARCH RESULT</span></li>';return{restrict:"ECA",require:["ngModel","nyaBsSelect"],controller:"nyaBsSelectCtrl",compile:function(l,m){l.addClass("btn-group");var n,y,z,A,B,C,D=function(){var b;if(m.titleTpl)b=v(m.titleTpl);else if(m.title){var c;try{c=a(m.title)()}catch(d){c=m.title}b=document.createTextNode(c)}else b=I.defaultNoneSelectionTpl?v(I.defaultNoneSelectionTpl):document.createTextNode(I.defaultNoneSelection?I.defaultNoneSelection:e);return b},E=l.children(),F=v(f),G=v(g),H=v(j),I=d;for(z=r(l[0]),z.forEach(function(a){/btn-(?:primary|info|success|warning|danger|inverse)/.test(a)&&(l.removeClass(a),F.removeClass("btn-default"),F.addClass(a)),"form-control"===a&&F.addClass(a)}),H.append(E),A=E.length,B=0;A>B;B++)C=E.eq(B),(C.hasClass("nya-bs-option")||C.attr("nya-bs-option"))&&C.find("a").attr("tabindex","0");return"true"===m.liveSearch&&(n=v(h),I.noSearchResultTpl?k=k.replace("NO SEARCH RESULT",I.noSearchResultTpl):I.noSearchResult&&(k=k.replace("NO SEARCH RESULT",I.noSearchResult)),y=v(k),G.append(n),H.append(y)),F.children().eq(0).append(D()),G.append(H),l.append(F),l.append(G),function(d,e,f,g){function h(a){var b=N.hasOwnProperty(a)?N[a]:a,d=String.fromCharCode(b),f=R.children(),g=Object.keys(f);g.pop();var h=g.length,i=0;for(M+=d.toLowerCase(),G&&c.cancel(G);h>i;){var j=angular.element(f[g[i]]);if(j.hasClass("disabled"))break;if(0===j.text().trim().toLowerCase().indexOf(M)){if(e.hasClass("open")){k(f[g[i]]);break}if(!e.hasClass("open")){r(j);break}}i++}G=c(function(){M=""},300)}function j(){var a,b,c=R.children(),d=c.length;for(a=0;d>a;a++)if(b=c.eq(a),b.hasClass("active")&&b.hasClass("nya-bs-option"))return b;return null}function k(a){for(var b,c=a.childNodes,d=c.length,e=0;d>e;e++)if(b=c[e],1===b.nodeType&&"a"===b.tagName.toLowerCase()){b.focus();break}}function l(a){var b;b=R.children().eq(a?0:R.children().length-1);for(var c=0;c<R.children().length;c++)if(R.children().eq(c).hasClass("selected"))return R.children().eq(c)[0];return!b.hasClass("nya-bs-option")||b.hasClass("disabled")||b.hasClass("not-match")?a?n(b[0],"nextSibling"):n(b[0],"previousSibling"):b[0]}function n(a,b){if(!a||s(a,"nya-bs-option")){for(var c=a;(c=i(c,b))&&c.nodeType;)if(s(c,"nya-bs-option")&&!s(c,"disabled")&&!s(c,"not-match"))return c;return null}}function r(a){var b,c,f,g=H.$modelValue;b=y(a),"undefined"!=typeof b&&(O?(c=Array.isArray(g)?x(g):[],f=p(c,b),-1===f?(c.push(b),a.addClass("selected")):(c.splice(f,1),a.removeClass("selected"))):(R.children().removeClass("selected"),c=b,a.addClass("selected"))),H.$setViewValue(c),d.$digest(),O||(e.hasClass("open")&&e.triggerHandler("blur"),e.removeClass("open")),A()}function y(a){var b;return F?(b=a.data("isolateScope")||{},F(b)):J.valueIdentifier||J.keyIdentifier?(b=a.data("isolateScope")||{},b[J.valueIdentifier]||b[J.keyIdentifier]):a.attr("value")}function z(a){var b=a.find("a");return 0===b.children().length||b.children().eq(0).hasClass("check-mark")?b[0].firstChild.cloneNode(!1):b.children().eq(0)[0].cloneNode(!0)}function A(){var a=H.$modelValue;e.triggerHandler("change");var b=P.children().eq(0);return"undefined"==typeof a?(b.empty(),void b.append(D())):void(O&&0===a.length?(b.empty(),b.append(D())):c(function(){var c,d,e,g,h,i,j=R.children(),k=j.length,l=[];if(O&&"count"===f.selectedTextFormat?i=1:O&&f.selectedTextFormat&&(h=f.selectedTextFormat.match(/\s*count\s*>\s*(\d+)\s*/))&&(i=parseInt(h[1],10)),"undefined"!=typeof i&&a.length>i)return b.empty(),void b.append(I.numberItemSelectedTpl?v(I.numberItemSelectedTpl.replace("%d",a.length)):I.numberItemSelected?document.createTextNode(I.numberItemSelected.replace("%d",a.length)):document.createTextNode(a.length+" items selected"));for(e=0;k>e;e++)d=j.eq(e),d.hasClass("nya-bs-option")&&(c=y(d),O?Array.isArray(a)&&o(a,c)&&(g=d.attr("title"),l.push(g?document.createTextNode(g):z(d))):w(a,c)&&(g=d.attr("title"),l.push(g?document.createTextNode(g):z(d))));if(0===l.length)b.empty(),b.append(D());else if(1===l.length)b.empty(),b.append(l[0]);else for(b.empty(),e=0;e<l.length;e++)b.append(l[e]),e<l.length-1&&b.append(document.createTextNode(", "))}))}function B(){var a,b,c=R.find("li"),d=c.length;for(b=0;d>b;b++)if(a=c.eq(b),a.hasClass("nya-bs-option")||a.attr("nya-bs-option")){C=a[0].clientHeight;break}if(/\d+/.test(f.size)){var e=parseInt(f.size,10);R.css("max-height",e*C+"px"),R.css("overflow-y","auto")}}var C,E,F,G,H=g[0],J=g[1],K=!1,L=a(J.valueExp),M="",N={96:48,97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57},O="undefined"!=typeof f.multiple,P=t(e,["dropdown-toggle"]),Q=P.next(),R=t(Q,["dropdown-menu","inner"]),S=t(Q,["bs-searchbox"]),T=t(R,["no-search-result"]);J.valueExp&&(F=function(a,b){return L(a,b)}),J.setId(e.attr("id")),O&&(J.isMultiple=!0,H.$isEmpty=function(a){return!a||0===a.length}),"undefined"!=typeof f.disabled&&d.$watch(f.disabled,function(a){a?(P.addClass("disabled"),E=P.attr("tabindex"),P.attr("tabindex","-1"),K=!0):(P.removeClass("disabled"),E?P.attr("tabindex",E):P.removeAttr("tabindex"),K=!1)}),J.onCollectionChange=function(a){var b,c,e=[],f=H.$modelValue;if(f){if(a&&0!==a.length){if(F)for(b=0;b<a.length;b++)e.push(F(d,a[b]));else for(b=0;b<a.length;b++)J.valueIdentifier?e.push(a[b][J.valueIdentifier]):J.keyIdentifier&&e.push(a[b][J.keyIdentifier]);if(O){for(c=f.length,b=0;b<f.length;b++)o(e,f[b])||(f.splice(b,1),b--);c!==f.length&&(f=x(f))}else o(e,f)||(f=e[0])}else f=O?[]:null;H.$setViewValue(f),A()}},R.on("click",function(a){if(!K&&!v(a.target).hasClass("dropdown-header")){var b,c=q(a.target,R[0],"nya-bs-option");if(null!==c){if(b=v(c),b.hasClass("disabled"))return;r(b)}}}),b.on("click",function(a){null===q(a.target,e.parent()[0],e[0])&&(e.hasClass("open")&&e.triggerHandler("blur"),e.removeClass("open"))}),P.on("blur",function(){e.hasClass("open")||e.triggerHandler("blur")}),P.on("click",function(){var a,b=90;e.toggleClass("open"),e.hasClass("open")&&"undefined"==typeof C&&B();var c=P[0].getBoundingClientRect(),d=Q[0].getBoundingClientRect();e.hasClass("open")&&b+c.top+c.height+d.height>window.innerHeight?e.addClass("open-up"):e.removeClass("open-up"),"true"===f.liveSearch&&e.hasClass("open")?(S.children().eq(0)[0].focus(),a=l(!0),a&&(R.children().removeClass("active"),v(a).addClass("active"))):e.hasClass("open")&&(a=l(!0),a&&k(a))}),"true"===f.liveSearch&&S.children().on("input",function(){var a,b,c,d=S.children().val(),e=0,f=R.children(),g=f.length;if(d){for(a=0;g>a;a++)b=f.eq(a),b.hasClass("nya-bs-option")&&(u(b.find("a"),d)?(b.removeClass("not-match"),e++):b.addClass("not-match"));0===e?T.addClass("show"):T.removeClass("show")}else{for(a=0;g>a;a++)b=f.eq(a),b.hasClass("nya-bs-option")&&b.removeClass("not-match");T.removeClass("show")}c=l(!0),c&&(f.removeClass("active"),v(c).addClass("active"))}),H.$render=function(){var a,b,c=H.$modelValue,d=R.children(),e=d.length;if("undefined"==typeof c)for(a=0;e>a;a++)d.eq(a).hasClass("nya-bs-option")&&d.eq(a).removeClass("selected");else for(a=0;e>a;a++)d.eq(a).hasClass("nya-bs-option")&&(b=y(d.eq(a)),O?o(c,b)?d.eq(a).addClass("selected"):d.eq(a).removeClass("selected"):w(c,b)?d.eq(a).addClass("selected"):d.eq(a).removeClass("selected"));A()},e.on("keydown",function(a){var b=a.keyCode;if(9!==b){if(27!==b&&13!==b&&38!==b&&40!==b){if(m.liveSearch)return;h(b)}if(a.preventDefault(),K)return void a.stopPropagation();var c,d,g,i,o=q(a.target,e[0],P[0]);"true"===f.liveSearch?d=q(a.target,e[0],S[0]):c=q(a.target,e[0],Q[0]),o?13!==b&&38!==b&&40!==b||e.hasClass("open")||(a.stopPropagation(),e.addClass("open"),"undefined"==typeof C&&B(),"true"===f.liveSearch?(S.children().eq(0)[0].focus(),i=l(!0),i&&(R.children().removeClass("active"),v(i).addClass("active"))):(i=l(!0),i&&k(i))):c?27===b?(P[0].focus(),e.hasClass("open")&&e.triggerHandler("blur"),e.removeClass("open"),a.stopPropagation()):38===b?(a.stopPropagation(),i=n(a.target.parentNode,"previousSibling"),i?k(i):(i=l(!1),i&&k(i))):40===b?(a.stopPropagation(),i=n(a.target.parentNode,"nextSibling"),i?k(i):(i=l(!0),i&&k(i))):13===b&&(a.stopPropagation(),g=v(a.target.parentNode),g.hasClass("nya-bs-option")&&(r(g),O||P[0].focus())):d&&(27===b?(P[0].focus(),e.removeClass("open"),a.stopPropagation()):38===b?(a.stopPropagation(),g=j(),g&&(i=n(g[0],"previousSibling"),i?(g.removeClass("active"),v(i).addClass("active")):(i=l(!1),i&&(g.removeClass("active"),v(i).addClass("active"))))):40===b?(a.stopPropagation(),g=j(),g&&(i=n(g[0],"nextSibling"),i?(g.removeClass("active"),v(i).addClass("active")):(i=l(!0),i&&(g.removeClass("active"),v(i).addClass("active"))))):13===b&&(g=j(),g&&(r(g),O||P[0].focus())))}})}}}}]),z.directive("nyaBsOption",["$parse",function(a){var b=/^\s*(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/;return{restrict:"A",transclude:"element",priority:1e3,terminal:!0,require:["^nyaBsSelect","^ngModel"],compile:function(c,i){var j=i.nyaBsOption,p=document.createComment(" end nyaBsOption: "+j+" "),q=j.match(b);if(!q)throw new Error("invalid expression");var r,s,t,u,x,y=i.value,z=y?a(y):null,A=q[3]||q[1],B=q[2],C=q[4],D=q[5]?a(q[5]):null,E=q[6],F={$id:f},G={};return E?u=a(E):(r=function(a,b){return f(b)},s=function(a){return a}),function(a,b,c,f,i){function j(a){var c,f,j,u,y,z,C,D,F,G,I,K,L,M,N,O=b[0],P=e(),Q=[];if(x&&(K=[]),d(a))z=a,y=t||r;else{y=t||s,z=[];for(var R in a)a.hasOwnProperty(R)&&"$"!=R.charAt(0)&&z.push(R);z.sort()}for(C=z.length,D=new Array(C),c=0;C>c;c++)if(f=a===z?c:z[c],j=a[f],u=y(f,j,c),N={},B&&(N[B]=f),N[A]=j,Q.push(N),x&&(G=x(f,j),-1===K.indexOf(G)&&G&&K.push(G)),J[u])F=J[u],delete J[u],x&&(F.group=G),F.key=f,F.value=j,P[u]=F,D[c]=F;else{if(P[u])throw D.forEach(function(a){a&&a.scope&&(J[a.id]=a)}),new Error("Duplicates in a select are not allowed. Use 'track by' expression to specify unique keys.");D[c]={id:u,scope:void 0,clone:void 0,key:f,value:j},P[u]=!0,G&&(D[c].group=G)}K&&K.length>0&&(D=g(D,K,"group"));for(var S in J)F=J[S],M=h(F.clone),M.removeData("isolateScope"),M.remove(),F.scope.$destroy();for(c=0;C>c;c++)F=D[c],F.scope?(I=O,k(F)!=I&&v(O).after(F.clone),O=l(F),m(F.scope,c,A,F.value,B,F.key,C,F.group)):i(function(a,b){n(a,b),F.scope=b;var d=p.cloneNode(!1);a[a.length++]=d,v(O).after(a),a.addClass("nya-bs-option"),j=q?q(F.key,F.value):F.value||F.key,E.isMultiple?Array.isArray(H.$modelValue)&&o(H.$modelValue,j)&&a.addClass("selected"):w(j,H.$modelValue)&&a.addClass("selected"),O=d,F.clone=a,P[F.id]=F,m(F.scope,c,A,F.value,B,F.key,C,F.group)}),K&&(L&&L===F.group?F.clone.removeClass("first-in-group"):F.clone.addClass("first-in-group"),L=F.group,F.clone.addClass("group-item"));J=P,E.onCollectionChange(Q)}var q,E=f[0],H=f[1],I={};u&&(t=function(b,c,d){return B&&(F[B]=b),F[A]=c,F.$index=d,u(a,F)}),D&&(x=function(b,c){return B&&(G[B]=b),G[A]=c,D(a,G)}),B&&(E.keyIdentifier=B),A&&(E.valueIdentifier=A),z&&(E.valueExp=y,q=function(b,c){return B&&(I[B]=b),I[A]=c,z(a,I)});var J=e();"true"===c.deepWatch?a.$watch(C,j,!0):a.$watchCollection(C,j)}}}}])}();